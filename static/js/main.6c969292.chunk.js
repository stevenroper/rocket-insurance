(this["webpackJsonpsure-rocket-insurance"]=this["webpackJsonpsure-rocket-insurance"]||[]).push([[0],{299:function(e,t,a){},300:function(e,t,a){"use strict";a.r(t);var n,i=a(0),r=a.n(i),o=a(43),l=a.n(o),c=a(72),s=a(54),d=a(162),u=a(349),m=a(169),j={palette:{primary:{main:"#214e34"},secondary:{main:"#ffa000"}},components:{MuiButton:{defaultProps:{color:"secondary"}}}},b=a(23),f=a(351),h=a(352),O=a(58),v="/rating-information",p="/quote-overview",x=a(3),g=a(22),N=a(25),y=(a(96),a(163)),A=a(342),S=a(345),q=a(347),C=a(348),w=a(353),M=a(356),I=a(357),T=a(1),k=function(e){var t=e.message;return Object(T.jsxs)(f.a,{position:"absolute",height:"100%",width:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:"100",sx:{backdropFilter:"blur(5px)"},children:[Object(T.jsx)(f.a,{height:"100%",width:"100%",sx:{backgroundColor:"white",opacity:.75,position:"absolute"}}),t&&Object(T.jsx)(h.a,{variant:"h5",textAlign:"center",zIndex:"200",marginBottom:"1rem",children:t}),Object(T.jsx)(I.a,{})]})},P=a(344),D=function(){return Object(T.jsx)(P.a,{severity:"error",children:"Oops, something went wrong. Please try again later!"})},_=function(e){var t=e.children,a=e.isLoading,n=void 0!==a&&a,i=e.loadingMessage,r=void 0===i?"":i,o=e.maxWidth,l=e.showErrorMessage,c=void 0!==l&&l;return Object(T.jsxs)(M.a,{elevation:1,sx:{width:"100%",maxWidth:o,position:"relative"},children:[c&&Object(T.jsx)(D,{}),n&&Object(T.jsx)(k,{message:r}),t]})},W=a(18),B=a.n(W),L=a(32),z="https://fed-challenge-api.sure.now.sh/api/v1/quotes",E={headers:{Accept:"application/json"}},V=function(e){if(!e.ok)throw new Error("Network error: ".concat(e.status));return e.json()},F=function(){var e=Object(L.a)(B.a.mark((function e(t){var a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(z,Object(g.a)(Object(g.a)({},E),{},{method:"POST",body:JSON.stringify(t)}));case 2:return a=e.sent,e.abrupt("return",V(a));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(L.a)(B.a.mark((function e(t,a){var n;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(z,"/").concat(t),Object(g.a)(Object(g.a)({},E),{},{method:"PUT",body:JSON.stringify(a)}));case 2:return n=e.sent,e.abrupt("return",V(n));case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),H=function(){var e=Object(s.useQueryClient)(),t=Object(s.useQuery)("quote",(function(){return e.getQueryData("quote")}),{staleTime:1/0,cacheTime:1/0});return{clearState:function(){return e.removeQueries("quote")},state:t.data,updateState:function(t){return e.setQueryData("quote",t)},isSuccess:t.isSuccess}},R=function(e){return isNaN(e)?e:e.toLocaleString("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0,minimumFractionDigits:0})},Y=function(e){var t,a,n,i=e.disabled,r=void 0!==i&&i,o=e.name,l=e.onChange,c=Object(N.g)().control,s=H().state;return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(N.a,{name:o,control:c,render:function(e){var t,a,n,i,c,d,u,m,j,b,f=e.field;return Object(T.jsxs)(q.a,{fullWidth:!0,sx:{marginBottom:"0.5rem"},children:[Object(T.jsx)(C.a,{id:"".concat(o,"-select"),children:null===s||void 0===s||null===(t=s.quote)||void 0===t||null===(a=t.variable_options)||void 0===a||null===(n=a[o])||void 0===n?void 0:n.title}),Object(T.jsx)(A.a,Object(g.a)(Object(g.a)({labelId:"".concat(o,"-select"),label:null===s||void 0===s||null===(i=s.quote)||void 0===i||null===(c=i.variable_options)||void 0===c||null===(d=c[o])||void 0===d?void 0:d.title,disabled:r,inputProps:{"data-cy":"".concat(o,"-select")}},f),{},{onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){f.onChange(e),l(Object(x.a)({},o,e.target.value))})),children:(null!==(u=null===s||void 0===s||null===(m=s.quote)||void 0===m||null===(j=m.variable_options)||void 0===j||null===(b=j[o])||void 0===b?void 0:b.values)&&void 0!==u?u:[]).map((function(e){return Object(T.jsx)(S.a,{value:e,children:R(e)},e)}))}))]})}}),Object(T.jsx)(h.a,{variant:"caption",component:"p",marginBottom:"2rem",children:null===s||void 0===s||null===(t=s.quote)||void 0===t||null===(a=t.variable_options)||void 0===a||null===(n=a[o])||void 0===n?void 0:n.description})]})},J=function(){var e,t,a,n,i,r=H(),o=r.clearState,l=r.state,c=function(){var e=H(),t=e.state,a=e.updateState;return Object(s.useMutation)((function(e){var a,n,i,r,o;return Q(null===t||void 0===t||null===(a=t.quote)||void 0===a?void 0:a.quoteId,{quote:{quoteId:null===t||void 0===t||null===(n=t.quote)||void 0===n?void 0:n.quoteId,rating_address:null===t||void 0===t||null===(i=t.quote)||void 0===i?void 0:i.rating_address,policy_holder:null===t||void 0===t||null===(r=t.quote)||void 0===r?void 0:r.policy_holder,variable_selections:Object(g.a)(Object(g.a)({},null===t||void 0===t||null===(o=t.quote)||void 0===o?void 0:o.variable_selections),e)}})}),{onSuccess:function(e){return a(e)}})}(),d=c.isError,u=c.isLoading,m=c.mutate,j=Object(b.g)().push,p=Object(N.f)({defaultValues:{deductible:null===l||void 0===l||null===(e=l.quote)||void 0===e||null===(t=e.variable_selections)||void 0===t?void 0:t.deductible,asteroid_collision:null===l||void 0===l||null===(a=l.quote)||void 0===a||null===(n=a.variable_selections)||void 0===n?void 0:n.asteroid_collision}}),x=Object(O.a)();return(null===l||void 0===l?void 0:l.quote)?Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(_,{isLoading:u,loadingMessage:"Updating quote",maxWidth:"30rem",showErrorMessage:d,children:Object(T.jsxs)(f.a,{padding:"2rem 1.5rem",children:[Object(T.jsx)(h.a,{variant:"h4",component:"h2",textAlign:"center",children:"Your Quote"}),Object(T.jsxs)(f.a,{display:"flex",flexDirection:"column",alignItems:"center",padding:"1rem",border:"1px solid ".concat(y.a[300]),marginY:"1rem",children:[Object(T.jsx)(h.a,{variant:"h5",component:"h3",marginBottom:"0.5rem",children:"Yearly Premium"}),Object(T.jsx)(h.a,{variant:"h3",component:"p",fontWeight:"500",color:x.palette.primary.main,"data-cy":"premium-value",children:R(null===l||void 0===l||null===(i=l.quote)||void 0===i?void 0:i.premium)})]}),Object(T.jsx)(h.a,{variant:"h6",component:"h3",margin:"2rem 0 1rem 0",textAlign:"center",children:"Adjust policy coverage variables"}),Object(T.jsxs)(N.b,Object(g.a)(Object(g.a)({},p),{},{children:[Object(T.jsx)(Y,{name:"deductible",onChange:m,disabled:u}),Object(T.jsx)(Y,{name:"asteroid_collision",onChange:m,disabled:u})]})),Object(T.jsx)(f.a,{display:"flex",justifyContent:"center",children:Object(T.jsx)(w.a,{color:"primary",onClick:function(){j(v),o()},children:"Restart quote"})})]})}),false]}):Object(T.jsx)(b.a,{to:v})},K=a(80),U=a(170),G=a(49),Z=a(355),X=a(354),$=[{fullName:"Alabama",code:"AL"},{fullName:"Alaska",code:"AK"},{fullName:"Arizona",code:"AZ"},{fullName:"Arkansas",code:"AR"},{fullName:"California",code:"CA"},{fullName:"Colorado",code:"CO"},{fullName:"Connecticut",code:"CT"},{fullName:"Delaware",code:"DE"},{fullName:"District of Columbia",code:"DC"},{fullName:"Florida",code:"FL"},{fullName:"Georgia",code:"GA"},{fullName:"Hawaii",code:"HI"},{fullName:"Idaho",code:"ID"},{fullName:"Illinois",code:"IL"},{fullName:"Indiana",code:"IN"},{fullName:"Iowa",code:"IA"},{fullName:"Kansas",code:"KS"},{fullName:"Kentucky",code:"KY"},{fullName:"Louisiana",code:"LA"},{fullName:"Maine",code:"ME"},{fullName:"Maryland",code:"MD"},{fullName:"Massachusetts",code:"MA"},{fullName:"Michigan",code:"MI"},{fullName:"Minnesota",code:"MN"},{fullName:"Mississippi",code:"MS"},{fullName:"Missouri",code:"MO"},{fullName:"Montana",code:"MT"},{fullName:"Nebraska",code:"NE"},{fullName:"Nevada",code:"NV"},{fullName:"New Hampshire",code:"NH"},{fullName:"New Jersey",code:"NJ"},{fullName:"New Mexico",code:"NM"},{fullName:"New York",code:"NY"},{fullName:"North Carolina",code:"NC"},{fullName:"North Dakota",code:"ND"},{fullName:"Ohio",code:"OH"},{fullName:"Oklahoma",code:"OK"},{fullName:"Oregon",code:"OR"},{fullName:"Pennsylvania",code:"PA"},{fullName:"Rhode Island",code:"RI"},{fullName:"South Carolina",code:"SC"},{fullName:"South Dakota",code:"SD"},{fullName:"Tennessee",code:"TN"},{fullName:"Texas",code:"TX"},{fullName:"Utah",code:"UT"},{fullName:"Vermont",code:"VT"},{fullName:"Virginia",code:"VA"},{fullName:"Washington",code:"WA"},{fullName:"West Virginia",code:"WV"},{fullName:"Wisconsin",code:"WI"},{fullName:"Wyoming",code:"WY"}],ee=function(e){var t=e.children,a=Object(K.a)(e,["children"]);return Object(T.jsx)(f.a,Object(g.a)(Object(g.a)({display:"grid",gap:"1rem"},a),{},{children:t}))},te="firstName",ae="lastName",ne="line1",ie="line2",re="city",oe="state",le="zipCode",ce=function(e){var t,a=e.gridArea,n=e.name,i=Object(K.a)(e,["gridArea","name"]),r=Object(N.g)(),o=r.control,l=r.formState.errors,c=null===l||void 0===l||null===(t=l[n])||void 0===t?void 0:t.message;return Object(T.jsx)(N.a,{name:n,control:o,render:function(e){var t=e.field;return Object(T.jsx)(Z.a,Object(g.a)(Object(g.a)({id:n,variant:"outlined",error:Boolean(c),helperText:c,sx:{gridArea:a},inputProps:{"data-cy":"".concat(n,"-input")}},t),i))}})},se=function(e){var t=e.children,a=e.gridArea;Object(K.a)(e,["children","gridArea"]);return Object(T.jsx)(h.a,{variant:"h6",component:"h2",sx:{gridArea:a},children:t})},de=G.a((n={},Object(x.a)(n,te,G.b().required("Please enter a first name to continue.")),Object(x.a)(n,ae,G.b().required("Please enter a last name to continue.")),Object(x.a)(n,ne,G.b().required("Please enter a street address to continue.")),Object(x.a)(n,ie,G.b()),Object(x.a)(n,re,G.b().required("Please enter a city to continue.")),Object(x.a)(n,oe,G.b().required("Please select a state to continue.")),Object(x.a)(n,le,G.b().matches(/^\d{5}$/,"Please enter a valid, 5-digit zip code to continue.").required("Please enter a zip code to continue.")),n)),ue=function(){var e,t,a,n,i=function(){var e=Object(b.g)().push,t=H().updateState;return Object(s.useMutation)(F,{onSuccess:function(a){t(a),e(p)}})}(),r=i.mutate,o=i.isLoading,l=i.isError,c=Object(N.f)({defaultValues:(e={},Object(x.a)(e,te,""),Object(x.a)(e,ae,""),Object(x.a)(e,ne,""),Object(x.a)(e,ie,""),Object(x.a)(e,re,""),Object(x.a)(e,oe,""),Object(x.a)(e,le,""),e),resolver:Object(U.a)(de)}),d=null===c||void 0===c||null===(t=c.formState)||void 0===t||null===(a=t.errors)||void 0===a||null===(n=a[oe])||void 0===n?void 0:n.message;return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(_,{isLoading:o,loadingMessage:"Generating quote",maxWidth:"40rem",showErrorMessage:l,children:Object(T.jsx)(N.b,Object(g.a)(Object(g.a)({},c),{},{children:Object(T.jsx)("form",{onSubmit:c.handleSubmit((function(e){return r({first_name:e[te],last_name:e[ae],address:{line_1:e[ne],line_2:e[ie],city:e[re],region:e[oe],postal:e[le]}})})),children:Object(T.jsxs)(ee,{padding:"2rem 1.5rem",gridTemplateColumns:{xs:"1fr",md:"1fr 1fr"},gridTemplateAreas:{xs:'\n                "nameTitle"\n                "firstName"\n                "lastName"\n                "addressTitle"\n                "line1"\n                "line2"\n                "city"\n                "state"\n                "zipCode"\n                "submitButton"\n              ',md:'\n                "nameTitle nameTitle"\n                "firstName lastName"\n                "addressTitle addressTitle"\n                "line1 line1"\n                "line2 city"\n                "state zipCode"\n                "submitButton submitButton"\n              '},children:[Object(T.jsx)(se,{gridArea:"nameTitle",children:"Name"}),Object(T.jsx)(ce,{label:"First name",gridArea:"firstName",name:te,disabled:o}),Object(T.jsx)(ce,{label:"Last name",gridArea:"lastName",name:ae,disabled:o}),Object(T.jsx)(se,{gridArea:"addressTitle",children:"Address"}),Object(T.jsx)(ce,{label:"Street address",gridArea:"line1",name:ne,disabled:o}),Object(T.jsx)(ce,{label:"Apartment, unit, suite",gridArea:"line2",name:ie,disabled:o}),Object(T.jsx)(ce,{label:"City",gridArea:"city",name:re,disabled:o}),Object(T.jsx)(N.a,{name:oe,control:c.control,render:function(e){var t=e.field;return Object(T.jsxs)(q.a,{children:[Object(T.jsx)(C.a,{id:"state-dropdown",children:"State"}),Object(T.jsx)(A.a,Object(g.a)(Object(g.a)({labelId:"state-dropdown",label:"State",error:Boolean(d),MenuProps:{PaperProps:{sx:{maxHeight:"20rem"}}},inputProps:{"data-cy":"state-select"}},t),{},{children:$.map((function(e){return Object(T.jsx)(S.a,{value:e.code,children:e.fullName},e.code)}))})),Boolean(d)&&Object(T.jsx)(X.a,{error:!0,children:d})]})}}),Object(T.jsx)(ce,{label:"Zip code",gridArea:"zipCode",name:le,disabled:o}),Object(T.jsx)(f.a,{display:"flex",justifyContent:"center",marginTop:"1rem",sx:{gridArea:"submitButton"},children:Object(T.jsx)(w.a,{variant:"contained",type:"submit",sx:{width:{xs:"100%",md:"fit-content"}},disabled:o||c.formState.isSubmitted&&!c.formState.isValid,children:"Get quote"})})]})})}))}),false]})};var me=function(){var e=Object(O.a)();return Object(T.jsxs)(f.a,{minHeight:"calc(100vh - 2rem)",display:"flex",flexDirection:"column",alignItems:"center",padding:"1rem",sx:{backgroundColor:e.palette.primary.main},children:[Object(T.jsx)(h.a,{fontSize:"3rem",children:"\ud83d\ude80"}),Object(T.jsx)(h.a,{component:"h1",variant:"h2",fontWeight:"700",marginBottom:"1rem",color:e.palette.secondary.main,textAlign:"center",children:"Rocket Insurance"}),Object(T.jsxs)(b.d,{children:[Object(T.jsx)(b.b,{path:v,component:ue}),Object(T.jsx)(b.b,{path:p,component:J}),Object(T.jsx)(b.b,{path:"*",children:Object(T.jsx)(b.a,{to:"/rating-information"})})]})]})},je=(a(299),new s.QueryClient);l.a.render(Object(T.jsx)(r.a.StrictMode,{children:Object(T.jsx)(c.a,{children:Object(T.jsxs)(s.QueryClientProvider,{client:je,children:[Object(T.jsx)(u.a,{theme:Object(m.a)(j),children:Object(T.jsx)(me,{})}),Object(T.jsx)(d.ReactQueryDevtools,{})]})})}),document.getElementById("root"))}},[[300,1,2]]]);
//# sourceMappingURL=main.6c969292.chunk.js.map